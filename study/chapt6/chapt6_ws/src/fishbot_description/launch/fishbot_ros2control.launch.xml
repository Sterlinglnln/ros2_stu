<launch>
  <!-- 定义 URDF 和 RViz 配置路径 -->
  <let name="urdf_path"
       value="$(find-pkg-share fishbot_description)/urdf/fishbot/fishbot.urdf.xacro" />
  <let name="rviz_config_path"
       value="$(find-pkg-share fishbot_description)/config/display_robot_model.rviz" />

  <!-- 启动 robot_state_publisher -->
  <node pkg="robot_state_publisher" exec="robot_state_publisher">
    <param name="robot_description" value="$(command 'xacro $(var urdf_path)')" />
  </node>

  <!-- 启动 ros2_control_node -->
  <node pkg="controller_manager" exec="ros2_control_node">
    <param from="$(find-pkg-share fishbot_description)/config/fishbot_controllers.yaml" />
  </node>

  <!-- 启动控制器 -->
  <node pkg="controller_manager" exec="spawner" args="joint_state_broadcaster" />
  <node pkg="controller_manager" exec="spawner" args="diff_drive_controller" />

  <!-- 启动 RViz -->
  <node pkg="rviz2" exec="rviz2" output="screen" args="-d $(var rviz_config_path)" />
</launch>
